# エラートラップ (Error trapping)

学生の解答から発生したエラーをどのように捕捉しますか？

エラーは多くの理由で発生します。それらは重要であり、無視すべきではありません！通常、PRT がエラーを生成したために問題が機能しない場合、学生にペナルティを与えるべきではありません。PRT の評価中に実行時エラー（ランタイムエラー）が発生するとツリーのそれ以上の実行は停止し、学生には実行時エラーメッセージが表示されます。これは応答サマリーに `[RUNTIME_ERROR]` としてフラグ付けされます。

学生の解答は様々な理由で数学的エラーを生成する可能性がありますが、最もよくあるのは数学的定義域外で関数を評価することです。初歩的な例は以下の通りです。

1. ゼロ除算。
2. \(\pi/2\) のような点での \(\tan(x)\) の評価。（Maxima で `tan(%pi/2)` を試してください）。

時には、学生の解答におけるこのようなエラーをトラップして無視したり、PRT の一部を実行すべきかどうかを決定するノードを作成したりする必要があります。

時にはこれらは避けられず、無視する必要があります。

フィードバック変数の1つがエラーを投げても、PRT の実行は停止しません。エラーがある場合、これは応答サマリーに `[RUNTIME_FV_ERROR]` （ここでの fv は feedback variables を意味します）としてフラグ付けされます。許容したいエラーをトラップするために、フィードバック変数を使用することができます。例えば、フィードバック変数で以下のように定義できます。

    sa1:errcatch(tan(ans1));

もし `ans1:%pi/2` なら、`sa1` は空のリスト `[]` になります。そうでなければ、`sa1` は結果を含むリストとなり、PRT 内で `first(sa1)` を使用できます。

実行時エラーをトラップしたり、ガード節を作成したりするには、ツリーに追加のノード（例：`sa1` が空かどうか）や、フィードバック変数内に `if` 文が必要です。デフォルトではエラーを表示するようになっているため、エラーをテストして許容することを選択する場合、追加のノードが必要になります。
