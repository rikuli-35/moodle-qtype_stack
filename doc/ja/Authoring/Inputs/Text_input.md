# STACKのテキスト入力

数式として解釈される式ではなく、純粋なテキストを学生に入力させたい場合がある。

一部の動的問題ブロック、例えば[Parsonsブロック](../../Specialist_tools/Drag_and_drop/index.md)はJSONオブジェクトを生成する。STACKにおいてデータの状態を保持する唯一の手段は解答欄であるため、こうした動的なデータの状態を保存・記録するためにテキストベースの解答欄が利用される。

#### 文字列入力

通常の解答欄であり、学生は好きなものを入力できる。内部的にはMaximaの文字列に変換される。下記に注意する。

1. 学生の文字列をMaxima式として解析する方法はない。一度文字列として受け入れると、それは常に文字列のままである。後から代数的等価性をチェックすることはできない。利用可能なテストは単純な文字列マッチのみとなる。
2. 未入力（空）の回答は通常空白として扱われるが、`allowempty` オプションを有効にしている場合は、空文字列（`""`）として解釈される。これは、他の入力形式で用いられる`EMPTYANSWER`とは挙動が異なる点に注意する。
3. STACKは学生がHTMLコードを不正に入力することを防ぐため、文字列内の学生の入力を無害化する。例えば、学生が `a<b` と入力した場合、Maxima内部では不等号がHTMLエンティティに変換され、`a&lt;b` という文字列として保持されることがある。
もし文字列一致の判定が予期せず失敗した場合は、テストページでPRTが実際に何を比較しているかを確認する。その上で、比較対象に合うように教員側の正解を修正する必要がある。

#### JSON入力

JSXGraph、GeoGebra、ParsonsブロックはJSONオブジェクトを返す。これらのブロックをSTACK解答欄にリンクする際には、文字列入力ではなく、専用のJSON/GeoGebra/Parsons解答欄を使用することを推奨する。文字列入力は引き続き動作するが（既存のJSXGraph問題との互換性維持のため）、JSON入力を使用することで、期待される文字列の種類を論理的に明示できる。

またこの解答欄を使用すると、教員はデバッグ用に整形された状態のJSONオブジェクトを確認できるようになる。

#### メモ入力

この解答欄はテキストエリアであり、学生は自由に入力できる。メモや計算過程などを収集するために使用できる。ただし、この入力は常に無効とみなされるため、この解答欄に依存するポテンシャル・レスポンス・ツリーは評価されない。

この解答欄タイプは以下に使用できる。

1. アンケート
2. [半自動採点](../../Moodle/Semi-automatic_Marking.md)に寄与する、自動採点されない回答。

メモ入力には特別なオプション`manualgraded`があり、デフォルト値は`manualgraded:false`である。`manualgraded:true`を指定した場合、STACK問題全体の手動採点が必要になる。

他の解答欄形式との一貫性のために、教員は正解を設定しておく必要がある（例：空文字列 `""` など）。ただし、ここで設定した回答が採点などで使用されることはない。

### Parsons入力

Parsonsブロックによって生成されたJSONオブジェクトを格納するための、専用の[Parsons入力](../../Specialist_tools/Drag_and_drop/index.md)が利用可能である。
