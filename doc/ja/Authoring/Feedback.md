# フィードバック

STACK の目的は、学生の数学的な問題に対する解答を評価し、その解答の特性に基づいてフィードバックを割り当てることである。

このドキュメントでは、STACK が学生にフィードバックを提供する方法について説明する。フィードバックを作成する詳細な方法については、[ポテンシャル・レスポンス・ツリー](Potential_response_trees.md) を参照のこと。

## 評価の種類

* 形成的評価（Formative assessment）: 学生の学習を支援し、情報を提供するためのものである。ここでのフィードバックは定性的なものを含む。例えば学生の回答に合わせて記述されたコメントや、その課題におけるパフォーマンスの向上を支援するように設計されたものなどが挙げられる。
* 総括的評価（Summative assessment）: 学生の達成度を判定するためのものである。数学において、総括的フィードバックは定量的なもの、つまり点数やパーセンテージであることが最も多い。
* 有効性評価（Evaluative assessment）: 教育・学生評価の有効性を評価するためのものである。このような評価は、質的向上や品質監査の機能を持つ場合がある。[レポート](../../en/STACK_question_admin/Reporting.md) を参照のこと。個々の学生や集団全体のデータを自動的に生成できる能力は、CAAの特定の強みであり、定期的かつ詳細な評価的評価を可能にする。

STACK の設問が複数ある問題では、2つの重要なコンポーネントが完全に分離されている。

1. [解答欄](../../en/Authoring/Inputs/index.md) のリスト
2. [ポテンシャル・レスポンス・ツリー](Potential_response_trees.md) のリスト

個別フィードバックは、各解答欄および各ポテンシャル・レスポンス・ツリーに関連付けられている。通常、これは個別フィードバックセクションに配置される。そうすることで、いつ表示するかをMoodle側でより詳細に制御できるためである。ただし、フィードバックタグは [問題テキスト](CASText.md#question_text) 内のどこにでも配置できる。

## 検証（Validation）

解答が [ポテンシャル・レスポンス・ツリー](Potential_response_trees.md) で利用可能になる前に、その入力は検証される必要がある。特に、各試行において、各解答にはステータスが割り当てられる。

1. NULL: 解答欄に一度も値が入力されていないか、学生が解答を削除したためにフィールドが現在空であることを示す。
2. new: 解答が検証あるいは評価されていないが、以前の試行から変更されていることを示す。
3. invalid: フィールドの内容が無効であることを示す。
4. valid: 有効であるが採点されていない解答であることを示す。
5. score: この場合、解答はそれを必要とするすべてのポテンシャル・レスポンス・ツリーで利用可能である。

通常、学生は自分の入力内容が表示された形式を確認し、それから改めて送信する。このデフォルトの動作は、選択形式の問題には不適切であり、「入力した解答の表示」オプションを使用して各解答欄に対して変更できる。学生の解答がエコーバックされて表示されるかどうかは、別のオプション「数式の文法の確認」によって制御される。検証エラーは常に表示される。

本来、学生が入力した文字列が有効か無効かは問題に依存しない。つまり、何をもって構文的に有効な式とするかについての一貫したメカニズムがあるはずである。しかし、実際にはそれほど単純ではない。「浮動小数点数の禁止」など、一部の [解答欄オプション](../../en/Authoring/Inputs/Input_options.md) は有効性の検証に影響を与える。また、 \(i\) や \(j\)のような記号は、\(\sqrt{-1}\) なのかベクトル成分なのかといった、異なる文脈での意味がある。詳細は [オプション](Question_options.md) を参照のこと。

# ポテンシャル・レスポンス・ツリー

各 [ポテンシャル・レスポンス・ツリー](Potential_response_trees.md) は3つの結果を返す。

1. 数値スコア
2. 学生向けのテキスト
3. [レポート](../../en/STACK_question_admin/Reporting.md) の際に教師が使用するための [解答記録](Potential_response_trees.md#answer_note)

これらはそれぞれ、評価の総括的、形成的、評価的機能に概ね対応している。
[全般的なフィードバック](CASText.md#general_feedback)（以前のバージョンでは模範解答として知られていた）は学生の解答に依存しない。したがって、厳密な意味では学生の取り組みに対するフィードバックとは見なされない。しかし、依然として学生にとって非常に有用な結果である。

各問題においてどの程度のフィードバックが利用可能になるかは、問題の挙動（question behaviours）によって管理される。

## 数値スコア

各ポテンシャル・レスポンス・ツリーは、0から1の間の数値スコアを計算する。これは、各ポテンシャル・レスポンス・ツリーの [比重](Potential_response_trees.md#question_value) で乗算される。問題の最終スコアは、すべてのポテンシャル・レスポンス・ツリーの合計である。

数値スコアは、各ポテンシャル・レスポンス・ツリーを探索することによって組み立てられる。

* 各ノードの各分岐では、スコアを加算、減算、または特定の値を設定できる。
* 最終的な結果は0から1の間である必要がある。スコア \(s\) がこの範囲外にある場合、範囲内に収めるために \( \min(\max(s,0),1) \) とみなされ、その後、そのポテンシャル・レスポンス・ツリーの [比重](Potential_response_trees.md#question_value) を掛けてスケーリングされる。
* 試行に対する減点も、ポテンシャル・レスポンス・ツリー内で設定することができる。デフォルトではポテンシャル・レスポンス・ツリーの各分岐の減点フィールドは空であり、その場合は問題レベルの減点値が使用される。ただし、これらのフィールドを明示的にゼロに設定することで、この結果に対する減点を取り除くことができるため便利である。
* ツリー全体の探索が終了した後、スコアが1であれば、減点は常に0になる。

STACK は、有効で異なる試行の回数に基づいて、各ポテンシャル・レスポンス・ツリーのスコアを調整する。減点方式は、完全に正解ではない「異なる有効な試行」ごとに、スコアから少量（デフォルトは \(0.1=10\%\)）を差し引く。これは、学生が最初に問題を間違えても、再試行する場合の粘り強さと勤勉さに報いるように設計されている。

これは次のように機能する。各試行 \(k\) について、

* \(s_k\) をポテンシャル・レスポンス・ツリーからのスコアとする。
* \(p_k\) を以下の減点とする。
      *もし \(s_k=1\) ならば \(p_k=0\)
      * \(s_k=1\)でなく、ポテンシャル・レスポンス・ツリーを抜ける前に探索された 最後の分岐で設定された減点 \(p\) が `NULL` でなければ \(p_k=p\)
      * そうでなければ、\(p_k\) は問題オプションで設定された減点（デフォルト \(0.1=10\%\)）

デフォルトの減点方式は各試行の最大スコアを採用するため、減点が累積しても、学生が以前の試行よりも不利になることはない。

具体的には

1. 異なる有効な試行について、\(i=1,\cdots n\) に対する \( (s_i,p_i) \) を、特定のポテンシャル・レスポンス・ツリーのスコアと減点のリストとする。
2. 試行 \(k\) のスコアは次のように定義される。

\[ \text{Question value} \times \max\left\{ s_i-\sum_{j=1}^i p_j,\ i=1,\cdots k \right\}.\]

これは純粋に（スコア、減点）のペアのリストの関数であることに注目すること。

その試行のスコアは、各ツリーから減点が差し引かれた後の、各ポテンシャル・レスポンス・ツリーの点数の合計である。

## 学生向けのテキスト

学生向けのテキストベースのフィードバックは、以下の要素を連結したものである。

* **評価関数のフィードバック**: 多くの [評価関数](../../en/Authoring/Answer_Tests/index.md) は独自のフィードバックを生成する。これは `quiet` オプションを使用して非表示にすることができる。このフィードバックは不要な場合も多いが、教師がこれを自力で再現するのは非常に困難である。
* **独自のフィードバック（Bespoke feedback）**: [ポテンシャル・レスポンス・ツリー](Potential_response_trees.md) の各分岐はフィードバックを生成する。
* **汎用フィードバック（Generic feedback）**: [ポテンシャル・レスポンス・ツリー](Potential_response_trees.md) が探索され、すべてのフィードバックが割り当てられると、スコアを使用して汎用フィードバックが生成される。素点が \(0\) の場合、デフォルトのフィードバックは「不正解（Incorrect answer）」である。素点が \(1\) の場合、デフォルトのフィードバックは「正解です。よくできました（Correct answer, well done）」である。それ以外の場合、汎用フィードバックは「あなたの答えは部分的に正しいです（Your answer is partially correct）」となる。これらの文字列は [オプション](Question_options.md) で変更できる。
