# エラーの捕捉

エラーは多くの理由で発生する。それらは重要であり、無視すべきではない。通常、PRT がエラーを生成したために問題が機能しない場合、学生にペナルティを与えるべきではない。PRT の走査中に実行時エラー（ランタイムエラー）が発生するとツリーのそれ以上の走査は停止し、学生には実行時エラーメッセージが表示される。これは応答サマリーに `[RUNTIME_ERROR]` としてフラグ付けされる。

学生の解答は様々な理由で数学的エラーを生成する可能性があるが、最もよくあるのは数学的定義域外で関数を評価することである。初歩的な例は以下の通りである。

1. ゼロ除算。
2. \(\pi/2\) のような点での \(\tan(x)\) の評価。（Maxima で `tan(%pi/2)` を試すとよい）。

時には、学生の解答におけるこのようなエラーをトラップして無視したり、PRT の一部を実行すべきかどうかを決定するノードを作成したりする必要がある。

フィードバック変数の1つがエラーを投げても、PRT の実行は停止しない。エラーがある場合、これは応答サマリーに `[RUNTIME_FV_ERROR]` （ここでの fv は feedback variables を意味する）としてフラグ付けされる。許容したいエラーをトラップするために、フィードバック変数を使用することができる。例えば、フィードバック変数で以下のように定義できる。

    sa1:errcatch(tan(ans1));

もし `ans1:%pi/2` なら、`sa1` は空のリスト `[]` になる。そうでなければ、`sa1` は結果を含むリストとなり、PRT 内で `first(sa1)` を使用できる。

実行時エラーをトラップしたり、ガード節を作成したりするには、ツリーに追加のノード（例：`sa1` が空かどうか）や、フィードバック変数内に `if` 文が必要である。デフォルトではエラーを表示するようになっているため、エラーをテストして許容することを選択する場合、追加のノードが必要になる。
