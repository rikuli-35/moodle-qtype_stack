# フィードバック

STACK の目的は、学生の数学的な問題に対する解答を評価し、その解答の特性に基づいてフィードバックを割り当てることです。

このドキュメントでは、STACK が学生にフィードバックを提供する方法について説明します。フィードバックを作成する詳細な方法については、[ポテンシャル・レスポンス・ツリー](Potential_response_trees%20ja.md) を参照してください。

## 評価の種類

* 形成的評価（Formative assessment）: 学生の学習を支援し、情報を提供するためのものです。ここでのフィードバックは定性的なものを含みます。例えば学生の回答に合わせて記述されたコメントや、その課題におけるパフォーマンスの向上を支援するように設計されたものなどが挙げられます。
* 総括的評価（Summative assessment）: 学生の達成度を判定するためのものです。数学において、総括的フィードバックは定量的なもの、つまり点数やパーセンテージであることが最も多いです。
* 有効性評価（Evaluative assessment）: 教育・学生評価の有効性を評価するためのものです。このような評価は、質的向上や品質監査の機能を持つ場合があります。[レポート](../STACK_question_admin/Reporting%20ja.md) を参照してください。個々の学生や集団全体のデータを自動的に生成できる能力は、CAAの特定の強みであり、定期的かつ詳細な評価的評価を可能にします。

STACK の設問が複数ある問題では、2つの重要なコンポーネントが完全に分離されています。

1. [解答欄](Inputs/index%20ja.md) のリスト
2. [ポテンシャル・レスポンス・ツリー](Potential_response_trees%20ja.md) のリスト

個別フィードバックは、各解答欄および各ポテンシャル・レスポンス・ツリーに関連付けられています。通常、これは個別フィードバックセクションに配置されます。そうすることで、いつ表示するかをMoodle側でより詳細に制御できるからです。ただし、フィードバックタグは [問題テキスト](CASText%20ja.md#question_text) 内のどこにでも配置できます。

## 検証（Validation）

解答が [ポテンシャル・レスポンス・ツリー](Potential_response_trees%20ja.md) で利用可能になる前に、その入力は検証される必要があります。特に、各試行において、各解答にはステータスが割り当てられます。

1. NULL: 解答欄に一度も値が入力されていないか、学生が解答を削除したためにフィールドが現在空であることを示します。
2. new: 解答が検証あるいは評価されていませんが、以前の試行から変更されていることを示します。
3. invalid: フィールドの内容が無効であることを示します。
4. valid: 有効ですが採点されていない解答であることを示します。
5. score: この場合、解答はそれを必要とするすべてのポテンシャル・レスポンス・ツリーで利用可能です。

通常、学生は自分の入力内容が表示された形式を確認し、それから改めて送信します。このデフォルトの動作は、選択形式の問題には不適切であり、「入力した解答の表示」オプションを使用して各解答欄に対して変更できます。学生の解答がエコーバックされて表示されるかどうかは、別のオプション「数式の文法の確認」によって制御されます。検証エラーは常に表示されます。

本来、学生が入力した文字列が有効か無効かは問題に依存しません。つまり、何をもって構文的に有効な式とするかについての一貫したメカニズムがあるはずです。しかし、実際にはそれほど単純ではありません！「浮動小数点数の禁止」など、一部の [解答欄オプション](Inputs/Input_options%20ja.md) は有効性の検証に影響を与えます。また、 \(i\) や \(j\)のような記号は、\(\sqrt{-1}\) なのかベクトル成分なのかといった、異なる文脈での意味があります。詳細は [オプション](Question_options%20ja.md) を参照してください。

# ポテンシャル・レスポンス・ツリー

各 [ポテンシャル・レスポンス・ツリー](Potential_response_trees%20ja.md) は3つの結果を返します。

1. 数値スコア
2. 学生向けのテキスト
3. [レポート](../STACK_question_admin/Reporting%20ja.md) の際に教師が使用するための [解答記録](Potential_response_trees%20ja.md#answer_note)

これらはそれぞれ、評価の総括的、形成的、評価的機能に概ね対応しています。
[全般的なフィードバック](CASText%20ja.md#general_feedback)（以前のバージョンでは模範解答として知られていました）は学生の解答に依存しません。したがって、厳密な意味では学生の取り組みに対するフィードバックとは見なされません。しかし、依然として学生にとって非常に有用な結果です。

各問題においてどの程度のフィードバックが利用可能になるかは、問題の挙動（question behaviours）によって管理されます。

## 数値スコア

各ポテンシャル・レスポンス・ツリーは、0から1の間の数値スコアを計算します。これは、各ポテンシャル・レスポンス・ツリーの [比重](Potential_response_trees%20ja.md#question_value) で乗算されます。問題の最終スコアは、すべてのポテンシャル・レスポンス・ツリーの合計です。

数値スコアは、各ポテンシャル・レスポンス・ツリーを探索することによって組み立てられます。

* 各ノードの各分岐では、スコアを加算、減算、または特定の値を設定できます。
* 最終的な結果は0から1の間である必要があります。スコア \(s\) がこの範囲外にある場合、範囲内に収めるために \( \min(\max(s,0),1) \) とみなされ、その後、そのポテンシャル・レスポンス・ツリーの [比重](Potential_response_trees%20ja.md#question_value) を掛けてスケーリングされます。
* 試行に対する減点も、ポテンシャル・レスポンス・ツリー内で設定することができます。デフォルトではポテンシャル・レスポンス・ツリーの各分岐の減点フィールドは空であり、その場合は問題レベルの減点値が使用されます。ただし、これらのフィールドを明示的にゼロに設定することで、この結果に対する減点を取り除くことができ、便利です。
* ツリー全体の探索が終了した後、スコアが1であれば、減点は常に0になります。

STACK は、有効で異なる試行の回数に基づいて、各ポテンシャル・レスポンス・ツリーのスコアを調整します。減点方式は、完全に正解ではない「異なる有効な試行」ごとに、スコアから少量（デフォルトは \(0.1=10\%\)）を差し引きます。これは、学生が最初に問題を間違えても、再試行する場合の粘り強さと勤勉さに報いるように設計されています。

これは次のように機能します。各試行 \(k\) について、

* \(s_k\) をポテンシャル・レスポンス・ツリーからのスコアとします。
* \(p_k\) を以下の減点とします。
      *もし \(s_k=1\) ならば \(p_k=0\)
      * \(s_k=1\)でなく、ポテンシャル・レスポンス・ツリーを抜ける前に探索された 最後の分岐で設定された減点 \(p\) が `NULL` でなければ \(p_k=p\)
      * そうでなければ、\(p_k\) は問題オプションで設定された減点（デフォルト \(0.1=10\%\)）

デフォルトの減点方式は各試行の最大スコアを採用するため、減点が累積しても、学生が以前の試行よりも不利になることはありません。

具体的には

1. 異なる有効な試行について、\(i=1,\cdots n\) に対する \( (s_i,p_i) \) を、特定のポテンシャル・レスポンス・ツリーのスコアと減点のリストとします。
2. 試行 \(k\) のスコアは次のように定義されます。

\[ \text{Question value} \times \max\left\{ s_i-\sum_{j=1}^i p_j,\ i=1,\cdots k \right\}.\]

これは純粋に（スコア、減点）のペアのリストの関数であることに注目してください。

その試行のスコアは、各ツリーから減点が差し引かれた後の、各ポテンシャル・レスポンス・ツリーの点数の合計です。

## 学生向けのテキスト

学生向けのテキストベースのフィードバックは、以下の要素を連結したものです。

* **評価関数のフィードバック**: 多くの [評価関数](Answer_Tests/index%20ja.md) は独自のフィードバックを生成します。これは `quiet` オプションを使用して非表示にすることができます。このフィードバックは不要な場合も多いですが、教師がこれを自力で再現するのは非常に困難です。
* **独自のフィードバック（Bespoke feedback）**: [ポテンシャル・レスポンス・ツリー](Potential_response_trees%20ja.md) の各分岐はフィードバックを生成します。
* **汎用フィードバック（Generic feedback）**: [ポテンシャル・レスポンス・ツリー](Potential_response_trees%20ja.md) が探索され、すべてのフィードバックが割り当てられると、スコアを使用して汎用フィードバックが生成されます。素点が \(0\) の場合、デフォルトのフィードバックは「不正解（Incorrect answer）」です。素点が \(1\) の場合、デフォルトのフィードバックは「正解です。よくできました（Correct answer, well done）」です。それ以外の場合、汎用フィードバックは「あなたの答えは部分的に正しいです（Your answer is partially correct）」となります。これらの文字列は [オプション](Question_options%20ja.md) で変更できます。
