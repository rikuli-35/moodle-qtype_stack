# 問題の作成に関するFAQ

## 使用しているSTACKのバージョンを確認したい

使用中のサーバー上のSTACKドキュメントのトップページにアクセスすると、ページ下部にSTACKプラグインのバージョン番号が表示される。もし使用中のサイトが`https://maths.assessment/site`なら、通常STACKドキュメントのURLは`https://maths.assessment/site/question/type/stack/doc/doc.php`である。ドキュメントはソースコードと共に配布されている。そのため、（最新リリースについて記述された `https://docs.stack-assessment.org/` のドキュメントではなく）このローカルのドキュメントを参照することで、使用中のサイトで実際に利用可能なSTACKの機能を確認できる。

バージョン番号はすべてのMoodleプラグインで使用される形式 (例 `2022052300`) で表示される。

## 提案またはバグを報告したい

一般的なコミュニティの議論は、[https://stack-assessment.zulipchat.com/](https://stack-assessment.zulipchat.com/) で行われている。

ソースコードと開発に関する議論は[github](http://github.com/maths/moodle-qtype_stack/issues)にあり、さらに[ILIAS](https://github.com/ilifau/assStackQuestion/)のサイトもある。

## 複数言語表示に対応した問題を作成したい

[複数言語](Languages.md)のサポートを参照できる。

## LaTeXとは/LaTeXを学ぶ手助けについて

LaTeXは文書作成システムである。STACKではいくつかの単純なLaTeXのみを必要とする。STACKは数式の記述（マークアップ）にのみLaTeXを使用しており、文書構造用のタグは使用しない。

* LaTeXがまったく初めての人のための入門書が[ここ](http://www.andy-roberts.net/misc/latex/index.html)にある。
* 数学の環境については[こちら](http://www.andy-roberts.net/writing/latex/mathematics_1)を参照のこと。
* LaTeXの詳細は<http://www.latex-project.org/guides/>から入手できる。

なお、複雑なLateXはSTACKでは動作しないものもあるので注意が必要である。そのため、記述はシンプルに保つのが望ましい。

## CASが有効なテキストフィールドにHTMLを追加したい

HTMLタグは通常通り使用できる。例えば、これらのタグを使って画像などを挿入することが可能である。

ただし、JSコードを含む任意の `<script>` タグは記述してはいけない。将来のバージョンのSTACKでは、クロスサイトスクリプティングはサポートされなくなる。

## MaximaセッションでSTACK固有の関数をテストしたい

コマンドラインのMaximaセッションにSTACK関数をロードする方法の詳細は、[STACK-Maximaサンドボックス](../../en/CAS/STACK-Maxima_sandbox.md)に記載されている。

## STACKで特定のMaximaの関数が動作しない場合

セキュリティ上の理由から、すべてのMaxima関数がSTACKで有効になっているわけではない。使用しようとしている関数は、STACK がデフォルトでロードしないライブラリに属しているかもしれない。もしその関数の使用にMaximaの load コマンドが必要な場合は、システム管理者または開発者に連絡し、そのライブラリを利用できるように（ロードコマンドを追加するよう）依頼する必要がある。

また、一部のライブラリはオプションであり、使用中のローカル環境にはインストールされていない可能性もある。

さらに、STACKには標準のMaxima関数ではない、STACK独自の関数が多数定義されていることにも注意が必要である。必要なコマンドが有効になっていないのは、代わりにSTACKが提供する機能を使用すべきだから、という可能性も十分にある。

## STACK が許可する Maxima 関数を変更したい

これは開発者の仕事である。開発者までご連絡ください。

## STACKで添え字を使いたい

添え字に関するより詳しい情報は、より一般的な [Maxima](../../en/CAS/Subscripts.md) ドキュメントの「アトムと添え字」のセクションにある。また、入力オプション[consolidatesubscripts](../../en/Authoring/Inputs/Input_options.md)も参照できる。

## 学生の解答が完全に簡約化されていることを確認したい

STACKの設計思想は、学生の解答が持つ「性質」を特定することにある。「簡約化（Simplify）」とは曖昧な概念である。例えば、\(1\) は \(2^0\) よりも単純であるが、\(2^{2^{10}}\) はおそらく、それが表す整数を10進数で書き下すよりも単純であろう。\(x+2\) が \(\frac{x^2-4}{x-2}\) よりも単純であることには誰もが同意するであろうが、以下の式については、最初の式の方が単純かもしれない。

\[ \frac{x^{12}-1}{x-1} =  x^{11}+x^{10}+x^9+x^8+x^7+x^6+x^5+x^4+x^3+x^2+x+1.\]

簡約化とは、暗黙のうちに「等価な最も短い式」を意味すると解釈されがちであるが、このことについてはあまり議論されていない。

これらの問題を回避するために、STACKでは教師が求める性質を明示することを期待している。例えば、因数分解された形を求めるのであれば、「簡約化された形」と表現するのではなく、「因数分解をした形」と表現すべきである。

STACKが用意している評価関数（学生の解答を模範解答と照らし合わせて採点・評価する機能）の一つに、[代数等価](../../en/Authoring/Answer_Tests/index.md#EqualComAss)がある。これは、加算と乗算における結合法則および交換法則を認めた上で解答を評価するもので、多くの場合、教師が求めているのはこの機能である。

## Maximaが `int(1/x,x)=log(abs(x))` と出力しないことについて

\( \int \frac{1}{x}dx = \log(|x|) \) は、負または正の実軸上では正しい一方、複素平面上では正しくないためである。ただし、この挙動を制御する設定がある。

    (%i199) integrate(1/x,x)；
    (%o199) log(x)

    (%i200) integrate(1/x,x), logabs : true；
    (%o200) log(abs(x)).

さらに、[積分の評価関数](../../en/Authoring/Answer_Tests/index.md#Int) では、教師は学生の解答として `log(x)` または `log(abs(x))` （あるいはその両方）を正解として受け入れることができる。

## CASから応答がない場合

問題のデバッグは難しい場合がある。完全なパーサ（構文解析器）を作成していないため、すべてのエラーを捕捉できるわけではない。万策尽きた場合は、Maximaに送信されている式そのものを詳細に調べる必要がある。

これを行うには

    サイト管理 -> プラグイン -> 問題タイプ -> STACK

ここで`CASデバッグ`がチェックされていることを確認する必要がある。

そうすれば、エラーレポートが表示されるはずである。例として

    サイト管理 -> プラグイン -> 問題タイプ -> STACK -> ヘルスチェック

そこで、Maximaに送られる式の例を見ることができる。このような式は[STACK-Maxima-sandbox](../../en/CAS/STACK-Maxima_sandbox.md)にコピーして評価することが可能である。ここで返されるエラーは、発生している問題の特定に役立つかもしれない。

問題の原因は通常、構文的に無効なMaximaコマンドを作成しようとしたことにある。例えば、[a,,b] はMaximaをクラッシュさせる。完全なパーサを作成していないため、まだこのような構文エラーのすべてが捕捉されるわけではない。
