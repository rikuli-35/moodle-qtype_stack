# 等価推論

STACKでは、方程式や不等式を行ごとに解いていくことができる場合があります。その際、隣接する行が互いに等価となるように推論を進める必要があります。

まず、問題に示された方程式をテキストエリアに入力します。そこから、問題が解けるまで1行ずつ計算を進めてください。通常、入力中にフィードバックが表示されます。

例えば、二次方程式 \\( x^2-4x-5=0\\) を解くには、次のように推論します。

    x^2-4*x-5=0
    (x+1)*(x-5)=0
    x=-1 or x=5

前の行からコピー&ペーストして、その行を書き換えることもできます。

この推論は次のように表示されることがあります。

\\[ \\begin{array}{ccc} \\  & x^2-4 x-5=0 & \\text{ } \\\\ \\color{green}{\\Leftrightarrow} & \\left(x+1\\right) \\left(x-5\\right)=0 & \\text{ } \\\\ \\color{green}{\\Leftrightarrow} & x=-1\\lor x=5 & \\text{ } \\end{array} \\]

このフィードバックが表示されるかどうかは、問題の設定によって異なります。このフィードバックは、STACKが各行を前の行と等価であるとみなしていることを示しています。最後の行が最終的な解答となりますが、推論全体も評価の対象となります。

1. STACKの[解答入力](Answer_input.md)で使用される通常の構文（括弧や掛け算の `*` 記号を含む）を使用してください。
2. 等価推論では、集合、リスト、行列は使用できません。
3. 解答をリストや数の集合として入力するのではなく、`x=-1 or x=5` のような論理的な記法を使用してください。

方程式だけでなく、式を使って行ごとに計算を進めることもできます。例えば、\\( (x-1)(x+4) \\) を展開するには、次のように推論します。

    (x-1)*(x+4)
    =x^2-x+4*x-4
    =x^2+3*x-4

これは次のように表示されることがあります。

\\[\\begin{array}{ll}\\ &\\left(x-1\\right) \\left(x+4\\right) \\cr \\color{green}{\\checkmark}&=x^2-x+4 x-4 \\cr
\\color{green}{\\checkmark}&=x^2+3 x-4\\end{array}\\]

この場合、新しい行は等号 `=` で始める必要があります。

## 「等価」とは何か？

2つの*方程式*が等価であるとは、同じ解を同じ重複度で持つことを意味します。

2つの*式*が等価であるとは、変数に値を代入したときに同じ値をとることを意味します。

等価推論を使って方程式を解く際の一般的なアドバイスは以下の通りです。

1. 式を因数分解し、\\( AB=0 \\color{green}{\\Leftrightarrow} A=0 \\lor B=0\\) を利用する。  
2. 2乗の差 \\(a^2-b^2=(a-b)(a+b)\\) を利用する。
3. 平方完成を行う。例：\\( (x-a)^2+b=0\\)。

## 平方根の計算を避ける

方程式の両辺の平方根をとってはいけません。
\\[ \\text{ If } a=b \\text{ then } a^2=b^2.\\]
しかし、
\\[ \\text{ if } a^2=b^2 \\text{ then } a=b \\text{ or } a=-b.\\]
つまり、\\(a^2=b^2\\) を \\(a=b\\) に変換するために両辺の平方根をとると、解を見落とす可能性があります。

この問題を避けるには、次のように*2乗の差*を利用します。

    a^2=b^2
    a^2-b^2=0
    (a-b)*(a+b)=0
    a=b or a=-b

\\[ \\begin{array}{ccc} \\  & a^2=b^2 & \\text{ } \\\\ \\color{green}{\\Leftrightarrow} & a^2-b^2=0 & \\text{ } \\\\ \\color{green}{\\Leftrightarrow} & \\left(a-b\\right) \\left(a+b\\right)=0 & \\text{ } \\\\ \\color{green}{\\Leftrightarrow} & a=b\\lor a=-b & \\text{ } \\end{array} \\]

## 特殊なケース

解が存在しない方程式がある場合もあります。解がないことは、以下のいずれかの方法で表現できます。

1. `false`。推論の途中で \\(1=2\\) のような矛盾にたどり着くことがあります。この方程式は偽であるため、推論の最終行に `false` と入力できます。
2. `none`。特別なキーワード `none` は、方程式を満たす変数の値が存在しないことを示すために使用されます。
3. `{}`。空集合は、解が存在しないことを示します。

\\(x=x\\) のように、すべての数が解となる方程式もあります。すべての数が解であることは、以下のいずれかの方法で表現できます。

1. `true`。推論の途中で \\(x=x\\) のような恒等式にたどり着くことがあります。この方程式は真であるため、推論の最終行に `true` と入力できます。
2. `all`。特別なキーワード `all` は、任意の変数の値が方程式を満たすことを示すために使用されます。
