# 解答入力

STACKでは、代数式を解答として入力する場面が多くある。解答は、数式処理システムMaximaと同じ構文を使って入力する必要がある。

この構文は、グラフ電卓の数式入力、Java・C・Basicなどの一般的なプログラミング言語、および表計算ソフトで使われる構文とおおむね同じである。習得しておくと便利である。

例えば、\\( e^{-t}\sin(3t)\\) と入力するには、次のように記述する。

    e^(-t)*sin(3*t)

STACKは構文エラーに対してできるだけわかりやすい情報を提供しようとする。また、軽微なエラーであれば自動的に補正してくれることもある。

## 基本的な記法

### 数値

数値はスペースを入れずに入力し、可能な限り小数ではなく分数を使用する。例えば、\\(1/4\\) は `0.25` ではなく `1/4` と入力する。また、

* \\(\pi\\) は `pi` または `%pi` と入力する。
* \\(e\\)（自然対数の底）は `e` または `%e` と入力する。
* \\(i\\) は `i` または `%i` と入力する。
  * 工学分野では \\(i\\) の代わりに `j` と入力することもある。わからない場合は先生に確認するとよい。
  * `sqrt(-1)` や `(-1)^(1/2)` を使うこともできるが、括弧に注意する必要がある。
  * STACKはMaximaの通常の入力規則を変更しているため、`%i` のつもりで変数 `i` を入力してしまうようなミスを防ぐことができる。
* 大きな数には科学的記数法も使用できる。例えば \\(1000\\) は `1E+3` と入力できる。ただし、多くの場面で浮動小数点数の使用は禁止されているので注意する。

### 掛け算

掛け算にはアスタリスク（*）を使用する。これを忘れることが、構文エラーの最もよくある原因である。例えば、

* \\(3x\\) は `3*x` と入力する。
* \\(x(ax+1)(x-1)\\) は `x*(a*x+1)*(x-1)` と入力する。

`2x` や `(x+1)(x-1)` のように曖昧さがない場合は、STACKが自動的にアスタリスクを補完することがある。ただし、従来の数学表記にはもともと曖昧な部分があるため、この自動補完は完全ではない。例えば、\\(f(x+1)\\) と \\(x(t+1)\\) を比較してみるとよい。

### べき乗

べき乗にはキャレット（^）を使用する。例えば、\\(x^2\\) は `x^2` と入力する。負のべき乗や分数のべき乗には括弧が必要である。

* \\(x^{-2}\\) は `x^(-2)` と入力する。
* \\(x^{1/3}\\) は `x^(1/3)` と入力する。
* 関数 `root(x,n)` は `x^(1/n)` の代わりに使用できる。第2引数を省略すると `root(x)=sqrt(x)` となる。

### 括弧

括弧は、式の中の項をグループ化するために重要である。STACKでは、従来の手書き数学とは異なり1次元の入力を使用するため、特に括弧の使い方が重要になる。括弧がいつ必要かを意識的に理解し、不必要に多く入れすぎないようにするとよい。

例えば、

\\[\frac{a+b}{c+d}\\]

は `(a+b)/(c+d)` と入力する。

`a+b/(c+d)` と入力すると、STACKは次のように解釈する。

\\[a+\frac{b}{c+d}.\\]

`(a+b)/c+d` と入力すると、STACKは次のように解釈する。

\\[\frac{a+b}{c}+d.\\]

`a+b/c+d` と入力すると、STACKは次のように解釈する。

\\[a+\frac{b}{c}+d.\\]

`a/b/c` という式についてよく考えてみるとよい。これはどういう意味であろうか。2通りの解釈があり得る。

\\[\\frac{a}{b}\\cdot\\frac{1}{c} = \\frac{a}{bc}\\quad\\text{or}\\quad\\frac{a}{\\frac{b}{c}}=\\frac{ac}{b}.\\]

Maximaはこれを \\(\\frac{a}{bc}\\) と解釈する。迷った場合は括弧を使用するとよい。

なお、この文脈では常に通常の丸括弧（`(a+b)` のように）を使用し、角括弧や中括弧（`[a+b]` や `{a+b}` のように）は使用してはいけない。

* `{a+b}` は集合を意味する。
* `[a+b]` はリストを意味する。

### 科学単位

解答に単位を含む問題が出題されることがある。例えば、\\( 9.81\\text{m}\\text{s}^{-2} \\) のような場合である。単位を入力するには掛け算を使用し、`9.81*m/s^2` または `9.81*m*s^(-2)` のように入力する。スペースや `+` などの記号は使わない。

### 添え字

添え字にはアンダースコア（_）を使用する。例えば、\\(a_b\\) は `a_b` と入力する。

### その他の例

* \\(2^{a+b}\\) は `2^(a+b)` と入力する。
* \\(2 \cos 3x\\) は `2*cos(3*x)` と入力する。
* \\(e^{ax}\sin(bx)\\) は `exp(a*x)*sin(b*x)` と入力する。
* \\( (ax^2 + b x + c)^{-1}\\) は `(a*x^2 + b*x + c)^(-1)` と入力する。

## 関数

* **標準関数**：\\(\sin\\)、\\(\cos\\)、\\(\tan\\)、\\(\exp\\)、\\(\log\\) などの関数は、通常の名前で入力できる。ただし、引数は必ず括弧で囲む必要がある。\\(\sin x\\) は `sin(x)` と入力し、\\(\ln 3\\) は `ln(3)` と入力する。
* **絶対値関数**：絶対値関数は、従来の表記では |_x_| と書かれるが、`abs(x)` と入力する必要がある。

### 三角関数

注意すべき点：

* STACKでは角度に度数法ではなくラジアンを使用する。
* 関数 \\(1/\sin(x)\\) は `cosec(x)` ではなく `csc(x)` と入力するのが望ましい。ただし、`cosec(x)` と入力することもできるし、単に`1/sin(x)` と書いても構わない。
* \\(\sin^2x\\) は `sin(x)^2` と入力する必要がある（これが本来の意味である）。同様に、\\(\tan^2(x)\\) や \\(\sinh^2(x)\\) なども同じ形式で入力する。
* \\(\sin^{-1}(x)\\) は従来、\\(\sin(t) = x\\) を満たす数 \\(t\\) を意味するが、これは \\(\sin(x)^{-1} = 1/\sin(x)\\) とは全く異なるものである。この従来の表記法は紛らわしいため、CASでは使用しない。\\(\sin^{-1}(x)\\) は `asin(x)` と入力する。同様に、\\(\tan^{-1}(x)\\)は `atan(x)` などと入力する。

### 指数関数と対数関数

* 指数関数を入力するには `exp(x)` と入力する。`e^x` でもSTACKでは動作するが、後でCASを使用する際に悪い習慣になる。
* \\(x\\) の底 \\(e\approx 2.71\cdots\\) の_自然対数_を入力するには `ln(x)` または `log(x)` と入力する。どちらも大文字の I（`I`）ではなく、小文字の l で始まることに注意する。
* \\(x\\) の常用対数（底が \\(10\\)）は `lg(x)` と入力する。
* \\(x\\) の底 \\(a\\) の対数は `lg(x,a)` と入力する。これは \\(\log_{a}(x)\\) とも表記される。

## 行列

行列形式で解答を入力する際、視覚的な記入欄が用意されていることもある。記入欄がない場合は、正しい構文のヒントが提示されることもある。それ以外の場合は、Maximaの行列入力記法を使用する必要がある。

次の行列：

\\[ \\left( \\begin{array}{ccc} 1 & 2 & 3 \\\\ 4 & 5 & 6 \\end{array} \\right)\\]

は `matrix([1,2,3],[4,5,6])` と入力する。

各行はリストとして入力し、すべての行は同じ長さにする必要がある。`matrix` 関数は、これが「リストのリスト」ではなく行列であることを示すために使用する。

### 方程式と不等式

方程式は等号を使って入力できる。例えば、方程式 \\(y=x^2-2x+1\\) を入力するには `y=x^2-2*x+1` と入力する。

不等式はキーボードの大なり記号・小なり記号を使って入力できる。`<`、`>`、`<=`、`>=` の4種類から選択できる。これらの記号の間にスペースは入れない。また、等号は必ず2番目に記述する（`=<` は使用できない）。

「等しくない」を入力するには `#` 記号を使用する。例えば、`x#1` は \\(x\neq 1\\) と解釈される。

不等式を `x>1 and x<=5` のように接続する場合は、論理接続詞 `and` や `or` を使用する必要がある。`1<x<5` のような「連鎖不等式」は入力構文として許可されていない。この場合は `1<x and x<5` と入力する。

### 行ごとの計算

問題によっては、行ごとに計算することを求められることがある。これは[同値変形](Equivalence_reasoning.md)と呼ばれる。

## その他の注意事項

* **ギリシャ文字**は英語名で入力できる。例えば、\\(\alpha+\beta\\) は `alpha+beta` と入力し、\\(2\pi\\) は `2*pi` と入力する。
* **集合**：Maximaで \\(\\{1,2,3\\}\\) のような集合を入力するには、関数 `set(1,2,3)` を使うか、中括弧を使って `{1,2,3}` と入力する。
* **リスト**：角括弧を使って入力できる。例えば、リスト _1,2,2,3_ を入力するには `[1,2,2,3]` と入力する。
* CASを直接使用する場合とは異なり、末尾にセミコロンを付ける必要は**ない**。

練習モードでテストに取り組み、解答を確認することで、正しい構文を学ぶこともできる。STACKは通常の数学表記で正解を表示するだけでなく、それをどのように入力すればよいかも示してくれる。ただし、入力方法は複数ある場合が多く、STACKが常に最も簡単な方法を提示するとは限らない。

STACKへの解答入力に困った場合は、担当の先生に相談するとよい。
